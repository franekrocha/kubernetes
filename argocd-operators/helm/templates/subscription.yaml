{{- range $cat, $catval := $.Values.catalogs }}
{{- range $pac, $pacval := $catval.packages }}
---
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: "-25"
  name: {{ $pac }}
  namespace: {{ $pacval.namespace }}
spec:
  channel: {{ $pacval.channel }}
  installPlanApproval: Automatic
  name: {{ $pacval.package }}
  source: {{ $cat }}
  sourceNamespace: {{ $.Values.catalogNamespace }}
{{- end }}
{{- end }}
